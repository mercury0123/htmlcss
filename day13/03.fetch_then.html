<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fetch_then</title>
</head>
<body>
    <h1>
        Promise 객체를 리턴하는 함수를 호출하는 함수는 then 메소드를 사용하여 
        실행순서를 기다리게 할 수도 있다.
    </h1>
    <ul>
        <li>fetch 함수 : 데이터 통신을 위해 제공되는 함수이며 url 주소를 파리미터로 받아 통신</li>
        <li>then 메소드 : Promise 객체를 리턴하는 함수 및 메소드를 기다려서 다음 순서의 로직을 수행하기 위한 연결기능을 한다</li>
    </ul>
    <h3>
        https://jsonplaceholder.typicode.com/todos/1
    </h3>
    <button type="button" id="btn">데이터 불러오기</button>
    <ul id="ul"></ul>
    <script>
        document.getElementById('btn').addEventListener('click',function(){
            fetch('https://jsonplaceholder.typicode.com/todos/1')
            .then(resp => resp.json())
            //.then(json => console.log(json)); //printData() 함수 필요없이 바로 여기서 콘솔출력해도 됨
            .then(json => printData(json));
        });

        function printData(obj){
            console.log(obj); // 잘 들어오는지 확인 ok!!
            for (const key in obj){
                document.getElementById('ul').innerHTML += `<li>${key} : ${obj[key]}</li>`;
            }
            
        }
    </script>
</body>
</html>